# Docker/Kubernetes 実践コンテナ開発入門
# 1章: Dockerの基礎
## Dockerの苦手な部分
- Dockerのコンテナ内部はLinux系OSっぽい構成をしているが、厳密にLinuxとしてふるまうわけではない
- FreeBSDのような非Linux環境を動作させたい場合は実現できない
- あくまでもアプリケーションをデプロイするための箱だと思うべき

## 1.1.2 Dockerの基礎概念
コンテナ型仮想化技術
- 仮想化ソフトウェアなしにOSのリソースを隔離し、仮想OSにする
    - この仮想OSをコンテナと呼ぶ
- OS上にインストールした仮想化ソフトウェアを利用し、ハードウェアを円座員により再現しゲストOSを作り出す仕組みはホストOS型の仮想化と呼ぶ
    - コンテナ型仮想化に比べると、仕組み上のオーバーヘッドが大きい

## 1.1.3 Dockerの考え方に触れる
出来上がったimageはDockerさえ実行されていればホスト環境を問わず実行でき、ホストにNode.jsやnpmをインストールする必要さえない

### LinuxKit
WindosやMacでも使えるLinuxサブシステムの名前
- WindowsやMacではLinuxがサポートされていないため、当初はvirtual boxからDockerを操作していた
- オーバーヘッドがあり使いにくいため、より簡素な環境構築のために作成した

## 1.2.3 本番環境に導入してこそDocker
実際に使用されている例
- AbemaTV
- FRESH LIVE
- アメーバブログ
- Pokemon Go

 クラウドプラットフォーム上での利用例
 - GKE(GCP)
 - ECS(AWS)
 - ACS(AZURE)

 不向きなもの
 - データストア

# 2章: Dockerコンテナのデプロイ
## 2.1 コンテナでアプリケーションを実行する
- Dockerイメージ
    - Dockerコンテナを構成するファイルシステムや、実行するアプリケーションや設定をまとめたもの
    - コンテナを作成するときのテンプレートとなるもの
- Dockerコンテナ
    - Dockerimageをもとに作成され、具現化されたファイルシステムとアプリケーションが実行されている状態

## 2.3.1 Dockerコンテナのライフサイクル
実行中・停止・破棄というライフサイクルになっている

- 実行中
    - Dockerimageをもとにコンテナが作成され、DockerfileのCMDやENTRYPOINTで定義されているアプリケーションの実行を開始する
- 停止
    - ディスクにコンテナ終了時の状態は保持されているので、再実行可能
- 破棄
    - 停止したコンテナは明示的に破棄しない限りディスクに残り続ける
        - 頻繁に実行と停止をするような場合はどんどんディスクを専有していくので不要なコンテナは削除することが望ましい

## 2.5 Docker Composeでマルチコンテナを実行する
- Dockerはアプリケーションのデプロイに特化したコンテナ
    - Dockerコンテナ=単一のアプリケーション
    - 仮想サーバとは対象とする粒度が違う
- docker-composer.ymlにコンテナ同士の依存関係を定義する
