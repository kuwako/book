# 第7章 ノードとビットコイン・ネットワーク
## ノードの種類
- フルノード
    - 140GB(2017年5月)
- SPV
    - ブロックヘッダと自分に関連するデータのみを保持
    - 37.5MB(2017年5月)

## InitialBlockDownload
- IDBにより、AWS t2.xlarge(4vCPU, 16GBメモリ)のEC2のインスタンスで全ブロックのダウンロードを6時間25分で終える

## メモリープール
まだブロックに格納されて居ないトランザクションはメモリプールと呼ばれるノード内のメモリ領域に格納される  
新しいブロックができると、そのブロックに格納されているトランザクションはメモリープールから削除される  
ブロックが無効になるとメモリプールに残る  

## SPVノードの課題
リモートノードとのコネクションにブルームフィルタをセットすることでSPVノードは効率的に自分に関連するトランザクションを受け入れられうようになったが  
それによりSPVノードが保持する公開鍵や特定のトランザクションの情報が接続先のフルノードに公開されるようになるため、情報漏洩のリスクが懸念される  
また、SPVノードにはブロックやトランザクションの完全な正当性を検証できない

## CompactBlock
逐一ブロードキャストされる既存のトランザクション(メモリプール中にあるもの)を受け取るのは無駄  
- 高帯域幅モード
    - 新しいブロックを受信したノードはそのブロックが有効が検証する前にリモートノードに新しいブロックをアナウンスする
- 停滞域幅モード
    - 新しいブロックを受信したノードはそのブロックが有効であるか完全に検証した後にロモーとノードに新しいブロ食うをアナウンスする

